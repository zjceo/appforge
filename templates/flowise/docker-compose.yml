version: '3.8'

services:
  flowise:
    image: flowiseai/flowise:latest
    container_name: flowise
    restart: unless-stopped
    ports:
      - "${FLOWISE_PORT:-3000}:3000"
    environment:
      - FLOWISE_USERNAME=${FLOWISE_USERNAME:-}
      - FLOWISE_PASSWORD=${FLOWISE_PASSWORD:-}
      - DATABASE_PATH=${DATABASE_PATH:-/home/node/.flowise}
      - APIKEY_PATH=${APIKEY_PATH:-/home/node/.flowise}
      - LOG_LEVEL=${LOG_LEVEL:-info}
      - DEBUG=${DEBUG:-false}
      - SECRETKEY_PATH=${SECRETKEY_PATH:-/home/node/.flowise}
      - TOOL_FUNCTION_BUILTIN_DEP=${TOOL_FUNCTION_BUILTIN_DEP:-}
      - FLOWISE_SECRETKEY_OVERWRITE=${FLOWISE_SECRETKEY_OVERWRITE:-}
    volumes:
      - flowise_data:/home/node/.flowise
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:3000/api/v1/ping"]
      interval: 30s
      timeout: 10s
      retries: 3

volumes:
  flowise_data:

